# Vim命令

```java
可视模式：正常模式下按v可以进入可视模式， 在可视模式下，移动光标可以选择文本。按V进入可视行模式， 总是整行整行的选中。ctrl+v进入可视块模式。
```

## 文档操作

+ :e file –关闭当前编辑的文件，并开启新的文件。 如果对当前文件的修改未保存，vi会警告。 
+ e! file –放弃对当前文件的修改，编辑新的文件。 
+ :e+file – 开始新的文件，并从文件尾开始编辑。 
+ :e+n file – 开始新的文件，并从第n行开始编辑。 
+ :enew –编译一个未命名的新文档。(CTRL-W n) 
+ :e – 重新加载当前文档。 
+ :e! – 重新加载当前文档，并丢弃已做的改动。 
+ :f或ctrl+g – 显示文档名，是否修改，和光标位置。 
+ :f filename – 改变编辑的文件名，这时再保存相当于另存为。 
+ gf – 打开以光标所在字符串为文件名的文件。 
+ :w – 保存修改。 
+ ZZ – 保存并退出。 
+ :x – 保存并退出。 
+ :saveas newfilename – 另存为 

## 翻屏

+ ctrl+f: 下翻一屏。
+ ctrl+b: 上翻一屏。
+ ctrl+d: 下翻半屏。
+ ctrl+u: 上翻半屏。
+ ctrl+e: 向下滚动一行。
+ ctrl+y: 向上滚动一行。
+ n%: 到文件n%的位置。
+ zz: 将当前行移动到屏幕中央。
+ zt: 将当前行移动到屏幕顶端。
+ zb: 将当前行移动到屏幕底端。
+ H：将光标移动到屏幕顶端
+ M：将光标移动到屏幕中间
+ L：将光标移动到屏幕底端

## 光标移动

+ 0: 移动到行首。 
+ $: 移动到行尾。
+ gg: 到文件头部。
+ G: 到文件尾部。
+ nG: 到文件第n行。 
+ ctrl  o：返回到上一位置

## 插入

+  :r !date 在光标处插入当前日期与时间。同理，:r !command可以将其它shell命令的输出插入当前文档。 

## 查找

+ /something: 在后面的文本中查找something。
+ ?something: 在前面的文本中查找something。
+ n: 向后查找下一个。
+ N: 向前查找下一个。

## 替换

- :s/old/new - 用new替换当前行第一个old。
- :s/old/new/g - 用new替换当前行所有的old。
- :n1,n2s/old/new/g - 用new替换文件n1行到n2行所有的old。
- :%s/old/new/g - 用new替换文件中所有的old。
- :%s/^/xxx/g - 在每一行的行首插入xxx，^表示行首。
- :%s/\$/xxx/g - 在每一行的行尾插入xxx，$表示行首。
- :%s/表示行尾。
- 所有替换命令末尾加上c，每个替换都将需要用户确认。 如：%s/old/new/gc，加上i则忽略大小写(ignore)。

## 排版

+ << 向左缩进一个shiftwidth（8个字符）
+ \>> 向右缩进一个shiftwidth（8个字符）
+ :ce(nter) 本行文字居中
+ :le(ft) 本行文字靠左
+ :ri(ght) 本行文字靠右

## 撤销与重做

+ [n] u: 取消一(n)个改动。
+ :undo 5 – 撤销5个改变。
+ :undolist – 你的撤销历史。
+ ctrl + r: 重做最后的改动。
+ U: 取消当前行中所有的改动。
+ :earlier 4m – 回到4分钟前
+ :later 55s – 前进55秒

## 文件加解密

+ vim -x file: 开始编辑一个加密的文件。
+ :X – 为当前文件设置密码。
+ :set key= – 去除文件的密码。

## 编码

+ :e ++enc=utf8 filename, 让vim用utf-8的编码打开这个文件。
+ :w ++enc=gbk，不管当前文件什么编码，把它转存成gbk编码。
+ :set fenc或:set fileencoding，查看当前文件的编码。
+ 在vimrc中添加set fileencoding=ucs-bom,utf-8,cp936，vim会根据要打开的文件选择合适的编码。 注意：编码之间不要留空格。 cp936对应于gbk编码。 ucs-bom对应于windows下的文件格式。

